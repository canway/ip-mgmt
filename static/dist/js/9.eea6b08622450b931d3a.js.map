{"version":3,"sources":["webpack:///./src/views/Ip/abnormal/index.vue","webpack:///src/views/Ip/abnormal/index.vue","webpack:///./src/views/Ip/abnormal/index.vue?cd0b","webpack:///./src/views/Ip/abnormal/index.vue?79ac"],"names":["component","idList","push","item","id","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","onSearch","model","value","callback","$$v","searchValue","expression","_v","formWidgets","handleAdvancedSearch","copyData","length","toExport","_e","ref","dropdownShow","dropdownHide","staticStyle","slot","class","isDropdownShow","confirmNormal","confirmOffline","directives","name","rawName","isLoading","loading","zIndex","columns","visible","fixed","settingsFields","pagination","selectChange","handleSettingChange","handlePageChange","limitChange","scopedSlots","_u","key","fn","record","style","background","statusColorObj","scope","allocate_status","_s","statusObj","color","online_status","abnormalObj","abnormal_code","selectedRows","staticRenderFns"],"mappings":"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","file":"static/dist/js/9.eea6b08622450b931d3a.js","sourcesContent":["import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=585b54b1&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=585b54b1&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"585b54b1\",\n  null\n  \n)\n\nexport default component.exports","<!--\r\nThis program is named IP Management Center and it is a tool to help network administrators manage enterprise IP resource pool reasonably and conveniently.\r\nCopyright (C) <2021>  <Guangzhou Canway Technology Co.,Ltd.>\r\nContact details: jackliu@canway.net or 11th Floor, Building A，Fengxing Plaza No. 67 Tianhe East Road Tianhe District, Guangzhou, China 510630. jackliu, 15927493530\r\nThis file is part of IP Management Center.\r\nIP Management Center is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\r\nIP Management Center is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\r\nYou should have received a copy of the GNU General Public License along with Canway software. If not, see <https://www.gnu.org/licenses/>.\r\n-->\r\n<template>\r\n    <div class=\"table—wrapper\">\r\n        <div class=\"header-table-operation\">\r\n            <search-input\r\n                v-model=\"searchValue\"\r\n                :placeholder=\"'请输入关键字搜索'\"\r\n                @search=\"onSearch\">\r\n            </search-input>\r\n            <!-- 更多查询 -->\r\n            <advanced-search\r\n                :form-widgets=\"formWidgets\"\r\n                @submit=\"handleAdvancedSearch\">\r\n            </advanced-search>\r\n            <div class=\"operation-container\">\r\n                <div>\r\n                    <bk-button :title=\"'导出'\" @click=\"toExport\" v-if=\"copyData.length > 0\">\r\n                        导出Excel\r\n                    </bk-button>\r\n                    <bk-dropdown-menu trigger=\"click\" @show=\"dropdownShow\" @hide=\"dropdownHide\" ref=\"dropdown\">\r\n                        <div class=\"dropdown-trigger-btn\" style=\"padding-left: 19px;\" slot=\"dropdown-trigger\">\r\n                            <span>更多操作</span>\r\n                            <i :class=\"['bk-icon icon-angle-down',{ 'icon-flip': isDropdownShow }]\"></i>\r\n                        </div>\r\n                        <ul class=\"bk-dropdown-list\" slot=\"dropdown-content\">\r\n                            <li><a href=\"javascript:;\" @click=\"confirmNormal\">确认异常</a></li>\r\n                            <li><a href=\"javascript:;\" @click=\"confirmOffline\">加入离线白名单</a></li>\r\n                        </ul>\r\n                    </bk-dropdown-menu>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div v-bkloading=\"{ isLoading: loading, zIndex: 10 }\">\r\n            <common-table\r\n                :data=\"copyData\"\r\n                :columns=\"columns\"\r\n                :select-column=\"{ visible: true, fixed: true }\"\r\n                :order-column=\"{ visible: false, fixed: false }\"\r\n                @selection-change=\"selectChange\"\r\n                :settings-fields=\"settingsFields\"\r\n                :pagination=\"pagination\"\r\n                @handleSettingChange=\"handleSettingChange\"\r\n                @page-change=\"handlePageChange\"\r\n                @page-limit-change=\"limitChange\"\r\n            >\r\n                <template slot=\"status\" slot-scope=\"record\">\r\n                    <span\r\n                        class=\"radius-tip\"\r\n                        :style=\"{ background: statusColorObj[record.scope.allocate_status] }\">\r\n                    </span>\r\n                    {{ statusObj[record.scope.allocate_status] }}\r\n                </template>\r\n                <template slot=\"online_status\" slot-scope=\"record\">\r\n                    <span\r\n                        :style=\"{ color: record.scope.online_status ? '#14A568' : '#FF5656' }\">\r\n                        {{record.scope.online_status ? '在线' : '离线'}}\r\n                    </span>\r\n                </template>\r\n                <template slot=\"abnormal_code\" slot-scope=\"record\">\r\n                    <span>\r\n                        {{ abnormalObj[record.scope.abnormal_code] }}\r\n                    </span>\r\n                </template>\r\n                <template slot=\"operation\">\r\n                    <bk-button class=\"mr10\" theme=\"primary\" text>重置</bk-button>\r\n                </template>\r\n            </common-table>\r\n        </div>\r\n        <!--  批量收回对话框   -->\r\n        <batch-recycle ref=\"batchRecycle\" :selected=\"selectedRows\"></batch-recycle>\r\n        <!--  新增分配抽屉栏  -->\r\n        <add-distribute ref=\"distributeDialog\"></add-distribute>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import searchInput from '@/components/searchInput'\r\n    import commonTable from '@/components/table/comTable'\r\n    import advancedSearch from '@/components/popover/advancedSearch'\r\n    import batchRecycle from '../components/batchRecycle'\r\n    import addDistribute from '../components/addDistribute'\r\n\r\n    export default {\r\n        name: 'home',\r\n        components: {\r\n            commonTable,\r\n            searchInput,\r\n            advancedSearch,\r\n            batchRecycle,\r\n            addDistribute\r\n        },\r\n        data() {\r\n            return {\r\n                copyData: [],\r\n                columns: [],\r\n                searchValue: '',\r\n                loading: false,\r\n                statusColorObj: {\r\n                    '2': '#91B6F5',\r\n                    '1': '#7ED4B2',\r\n                    '4': '#9DB1CE',\r\n                    '3': '#E9B76E'\r\n                },\r\n                statusObj: {\r\n                    '1': '未分配',\r\n                    '2': '已分配',\r\n                    '3': '待回收',\r\n                    '4': '已回收'\r\n                },\r\n                abnormalObj: {\r\n                    '1': '未分配但在线',\r\n                    '2': '已分配但离线超过时限',\r\n                    '3': 'CMDB无此IP记录',\r\n                    '4': 'CMDB同步属性变动',\r\n                    '5': '本地无此IP但CMDB中存在',\r\n                    '6': '未分配但CMDB中存在'\r\n                },\r\n                selectedRows: [],\r\n                pagination: {\r\n                    current: 1,\r\n                    count: 3,\r\n                    limit: 10\r\n                },\r\n                // 动态表头的数据集合\r\n                settingsFields: [\r\n                    {\r\n                        key: 'ip',\r\n                        label: 'IP地址',\r\n                        disabled: true,\r\n                        conditionAttr: {\r\n                            widget: 'input',\r\n                            placeholder: '请输入IP地址',\r\n                            attr: {\r\n                                clearable: true\r\n                            }\r\n                        }\r\n                    },\r\n                    {\r\n                        key: 'ip_pool',\r\n                        label: '地址池名称',\r\n                        conditionAttr: {\r\n                            widget: 'data-select',\r\n                            label: '地址池',\r\n                            custom: true,\r\n                            name: 'ip_pool',\r\n                            placeholder: '请输入地址池',\r\n                            attr: {\r\n                                clearable: true,\r\n                                remote: true,\r\n                                filterable: true,\r\n                                searchable: true,\r\n                                popperAppendToBody: false,\r\n                                url: 'searchPool',\r\n                                detailUrl: 'poolDetail',\r\n                                initFlag: true\r\n                            }\r\n                        }\r\n                    },\r\n                    {\r\n                        key: 'offline_at',\r\n                        label: '离线时间',\r\n                        attr: {\r\n                            minWidth: '160px',\r\n                            showOverflowTooltip: true\r\n                        },\r\n                        conditionAttr: {\r\n                            widget: 'date-picker',\r\n                            placeholder: '请选择...',\r\n                            attr: {\r\n                                style: { width: '100%' },\r\n                                transfer: true,\r\n                                clearable: true,\r\n                                type: 'daterange',\r\n                                shortcutClose: true,\r\n                                useShortcutText: false,\r\n                                shortcuts: [\r\n                                    {\r\n                                        text: '今天',\r\n                                        value() {\r\n                                            const end = new Date()\r\n                                            const start = new Date()\r\n                                            return [start, end]\r\n                                        }\r\n                                    },\r\n                                    {\r\n                                        text: '近7天',\r\n                                        value() {\r\n                                            const end = new Date()\r\n                                            const start = new Date()\r\n                                            start.setTime(start.getTime() - 3600 * 1000 * 24 * 7)\r\n                                            return [start, end]\r\n                                        }\r\n                                    },\r\n                                    {\r\n                                        text: '近15天',\r\n                                        value() {\r\n                                            const end = new Date()\r\n                                            const start = new Date()\r\n                                            start.setTime(start.getTime() - 3600 * 1000 * 24 * 15)\r\n                                            return [start, end]\r\n                                        }\r\n                                    },\r\n                                    {\r\n                                        text: '近30天',\r\n                                        value() {\r\n                                            const end = new Date()\r\n                                            const start = new Date()\r\n                                            start.setTime(start.getTime() - 3600 * 1000 * 24 * 30)\r\n                                            return [start, end]\r\n                                        }\r\n                                    }\r\n                                ]\r\n                            }\r\n                        }\r\n                    },\r\n                    {\r\n                        key: 'offline_days',\r\n                        label: '离线天数',\r\n                        conditionAttr: {\r\n                            widget: 'input',\r\n                            placeholder: '请输入离线天数',\r\n                            attr: {\r\n                                clearable: true,\r\n                                type: 'number',\r\n                                min: 0\r\n                            }\r\n                        }\r\n                    },\r\n                    {\r\n                        key: 'gateway',\r\n                        label: '网关',\r\n                        conditionAttr: {\r\n                            widget: 'input',\r\n                            placeholder: '请输入网关',\r\n                            attr: {\r\n                                clearable: true\r\n                            }\r\n                        }\r\n                    },\r\n                    {\r\n                        key: 'dns',\r\n                        label: 'DNS服务器',\r\n                        conditionAttr: {\r\n                            widget: 'input',\r\n                            label: 'DNS',\r\n                            placeholder: '请输入DNS服务器',\r\n                            attr: {\r\n                                clearable: true\r\n                            }\r\n                        }\r\n                    },\r\n                    {\r\n                        key: 'allocate_status',\r\n                        label: '分配状态',\r\n                        scopedSlots: { customRender: 'status' },\r\n                        conditionAttr: {\r\n                            widget: 'data-select',\r\n                            custom: true,\r\n                            placeholder: '请选择相关数据',\r\n                            size: 'small',\r\n                            defaultValue: [],\r\n                            attr: {\r\n                                searchable: false,\r\n                                multiple: false,\r\n                                popperAppendToBody: false,\r\n                                clearable: true,\r\n                                options: [\r\n                                    {\r\n                                        id: '1',\r\n                                        name: '未分配'\r\n                                    },\r\n                                    {\r\n                                        id: '2',\r\n                                        name: '已分配'\r\n                                    },\r\n                                    {\r\n                                        id: '3',\r\n                                        name: '待回收'\r\n                                    },\r\n                                    {\r\n                                        id: '4',\r\n                                        name: '已回收'\r\n                                    }\r\n                                ]\r\n                            }\r\n                        }\r\n                    },\r\n                    {\r\n                        key: 'online_status',\r\n                        label: '在线状态',\r\n                        scopedSlots: { customRender: 'online_status' },\r\n                        conditionAttr: {\r\n                            widget: 'data-select',\r\n                            custom: true,\r\n                            placeholder: '请选择相关数据',\r\n                            size: 'small',\r\n                            defaultValue: [],\r\n                            attr: {\r\n                                searchable: false,\r\n                                multiple: false,\r\n                                popperAppendToBody: false,\r\n                                clearable: true,\r\n                                options: [\r\n                                    {\r\n                                        id: 1,\r\n                                        name: '在线'\r\n                                    },\r\n                                    {\r\n                                        id: 0,\r\n                                        name: '离线'\r\n                                    }\r\n                                ]\r\n                            }\r\n                        }\r\n                    },\r\n                    {\r\n                        key: 'abnormal_code',\r\n                        label: '异常原因',\r\n                        scopedSlots: { customRender: 'abnormal_code' },\r\n                        attr: {\r\n                            showOverflowTooltip: true\r\n                        },\r\n                        conditionAttr: {\r\n                            widget: 'data-select',\r\n                            custom: true,\r\n                            placeholder: '请选择异常原因',\r\n                            size: 'small',\r\n                            defaultValue: [],\r\n                            attr: {\r\n                                searchable: false,\r\n                                multiple: false,\r\n                                popperAppendToBody: false,\r\n                                clearable: true,\r\n                                options: [\r\n                                    {\r\n                                        id: '1',\r\n                                        name: '未分配但在线'\r\n                                    },\r\n                                    {\r\n                                        id: '2',\r\n                                        name: '已分配但离线超过时限'\r\n                                    },\r\n                                    {\r\n                                        id: '3',\r\n                                        name: 'CMDB无此IP记录'\r\n                                    },\r\n                                    {\r\n                                        id: '4',\r\n                                        name: 'CMDB同步属性变动'\r\n                                    },\r\n                                    {\r\n                                        id: '5',\r\n                                        name: '本地无此IP但CMDB中存在'\r\n                                    },\r\n                                    {\r\n                                        id: '6',\r\n                                        name: '未分配但CMDB中存在'\r\n                                    }\r\n                                ]\r\n                            }\r\n                        }\r\n                    }\r\n                ],\r\n                // 高级搜索面板的条件配置数据\r\n                formWidgets: [],\r\n                // 批量修改的数据\r\n                formData: {\r\n                    name: ''\r\n                },\r\n                // 搜索条件的缓存数据\r\n                searchParams: {},\r\n                isDropdownShow: false\r\n            }\r\n        },\r\n        watch: {\r\n            searchValue(newV) {\r\n                if (!newV) {\r\n                    this.onSearch()\r\n                }\r\n            }\r\n        },\r\n        created() {\r\n            this.fetchData()\r\n            const stateColumns = this.$store.state.product.tableColumns.ip_abnormal\r\n            if (stateColumns.length > 0) {\r\n                this.columns = [...stateColumns]\r\n            } else {\r\n                this.columns = this.settingsFields.slice(0, 7).concat(this.columns)\r\n            }\r\n            const adnvancedWidget = this.columns.map(item => {\r\n                return {\r\n                    name: item.key,\r\n                    label: item.label,\r\n                    ...item.conditionAttr\r\n                }\r\n            })\r\n            const _arr = ['offline_days']\r\n            this.formWidgets = adnvancedWidget.filter(data => !_arr.includes(data.name))\r\n        },\r\n        methods: {\r\n            async fetchData(params = {}) {\r\n                this.loading = true\r\n                try {\r\n                    const res = await this.$api.search_ip_abnormal({\r\n                        page: this.pagination.current,\r\n                        page_size: this.pagination.limit,\r\n                        ...this.searchParams,\r\n                        ...params\r\n                    })\r\n                    if (res.result) {\r\n                        const _data = res.data.results\r\n                        this.copyData = _data.map(item => {\r\n                            delete item['ip']\r\n                            return {...item['ip_obj'], ...item}\r\n                        })\r\n                        this.pagination.count = res.data.count\r\n                    } else {\r\n                        this._errorMessage(res.message)\r\n                    }\r\n                } finally {\r\n                    this.loading = false\r\n                }\r\n            },\r\n            selectChange(selection) {\r\n                this.selectedRows = selection\r\n            },\r\n            handlePageChange(page) {\r\n                this.pagination.current = page\r\n                this.fetchData()\r\n            },\r\n            limitChange(limit) {\r\n                this.pagination.limit = limit\r\n                this.fetchData()\r\n            },\r\n            onSearch(value) {\r\n                this.searchParams = {search: value}\r\n                this.pagination.current = 1\r\n                this.fetchData({\r\n                    search: value\r\n                })\r\n            },\r\n            handleAdvancedSearch(params) {\r\n                Object.keys(params).forEach(item => {\r\n                    if (item === 'offline_at') {\r\n                        if (params[item][0] && params[item][1]) {\r\n                            params['ip__' + item + '__gte'] = this.$moment(params[item][0]).format('YYYY-MM-DD HH:mm:ss')\r\n                            params['ip__' + item + '__lte'] = this.$moment(params[item][1]).format('YYYY-MM-DD HH:mm:ss')\r\n                            delete params[item]\r\n                        } else {\r\n                            delete params[item]\r\n                        }\r\n                    }\r\n                    if (!params[item] && params[item] !== 0) {\r\n                        delete params[item]\r\n                    }\r\n                })\r\n                this.searchParams = {...params}\r\n                this.fetchData({...params})\r\n            },\r\n            // 批量回收的触发事件\r\n            handleRecycle() {\r\n                if (this.selectedRows.length === 0) {\r\n                    this._warnMessage('请先选择要回收的IP地址')\r\n                    return false\r\n                }\r\n                this.$refs.batchRecycle.showDialog()\r\n            },\r\n            // 确认异常触发事件\r\n            confirmNormal() {\r\n                if (this.selectedRows.length === 0) {\r\n                    this._warnMessage('请先选择确认为异常的IP')\r\n                    return false\r\n                }\r\n                const idList = []\r\n                for (const item of this.selectedRows) {\r\n                    idList.push(item.id)\r\n                }\r\n                this.$bkInfo({\r\n                    title: '确认将该异常从清单中清除吗？',\r\n                    subTitle: '如该异常仍存在，将在下一次周期检测时重新纳入异常清单中。',\r\n                    confirmLoading: true,\r\n                    confirmFn: async() => {\r\n                        try {\r\n                            const res = await this.$api.confirm_ip_abnormal({abnormal_ips: idList})\r\n                            if (res.result) {\r\n                                this._successMessage('确认成功')\r\n                                this.fetchData()\r\n                                return true\r\n                            } else {\r\n                                this._errorMessage(res.message)\r\n                                return true\r\n                            }\r\n                        } catch (e) {\r\n                            return false\r\n                        }\r\n                    }\r\n                })\r\n            },\r\n            // 确认异常触发事件\r\n            confirmOffline() {\r\n                if (this.selectedRows.length === 0) {\r\n                    this._warnMessage('请先选择加入离线白名单的IP')\r\n                    return false\r\n                }\r\n                this.$bkInfo({\r\n                    width: 500,\r\n                    title: '确认将这些IP加入离线白名单吗？',\r\n                    confirmLoading: true,\r\n                    confirmFn: async() => {\r\n                        try {\r\n                            const ipList = this.selectedRows.map(i => { return i.ip_obj.id })\r\n                            const res = await this.$api.add_offline_except({ip_list: ipList})\r\n                            if (res.result) {\r\n                                this._successMessage('加入离线白名单成功')\r\n                                this.fetchData()\r\n                                return true\r\n                            } else {\r\n                                this._errorMessage(res.message)\r\n                                return true\r\n                            }\r\n                        } catch (e) {\r\n                            return false\r\n                        }\r\n                    }\r\n                })\r\n            },\r\n            // 点击显示弹出层的统一触发事件\r\n            handleVisible(name) {\r\n                this.$refs[name].showDialog()\r\n            },\r\n            handleSettingChange(copyData, columns) {\r\n                const _arr = ['offline_days']\r\n                this.formWidgets = copyData.filter(data => !_arr.includes(data.name))\r\n                // vuex缓存表格头设置的信息\r\n                this.$store.commit('setTableColumns', {column: columns, key: 'ip_abnormal'})\r\n            },\r\n            // 导出excel\r\n            toExport() {\r\n                let _params = ''\r\n                Object.keys(this.searchParams).forEach(item => {\r\n                    _params = _params + `&${item}=${this.searchParams[item]}`\r\n                })\r\n                const url = window.siteUrl + 'ip_abnormal/export_excel/?page=1&page_size=-1' + _params\r\n                window.open(url)\r\n            },\r\n            // 下拉菜单操作\r\n            dropdownShow() {\r\n                this.isDropdownShow = true\r\n            },\r\n            dropdownHide() {\r\n                this.isDropdownShow = false\r\n            },\r\n            triggerHandler() {\r\n                this.$refs.dropdown.hide()\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.radius-tip {\r\n    display: inline-block;\r\n    width: 10px;\r\n    height: 10px;\r\n    border-radius: 50%;\r\n}\r\n.dropdown-trigger-btn {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    border: 1px solid #c4c6cc;\r\n    height: 32px;\r\n    line-height: 32px;\r\n    min-width: 68px;\r\n    border-radius: 2px;\r\n    padding: 0 15px;\r\n    color: #63656E;\r\n    font-size: 14px;\r\n    background-color: #FFF;\r\n}\r\n.dropdown-trigger-btn.bk-icon {\r\n    font-size: 18px;\r\n}\r\n.dropdown-trigger-btn .bk-icon {\r\n    font-size: 22px;\r\n}\r\n.dropdown-trigger-btn:hover {\r\n    cursor: pointer;\r\n    border-color: #979ba5;\r\n}\r\n/deep/ .bk-dropdown-content {\r\n    overflow: visible !important;\r\n    .bk-dropdown-list {\r\n        margin-top: -5px;\r\n    }\r\n}\r\n/deep/ .bk-dropdown-menu .bk-dropdown-list > li {\r\n    background-color: #fff;\r\n    border-left: 1px solid #ccc;\r\n    border-right: 1px solid #ccc;\r\n}\r\n/deep/ .bk-dropdown-menu .bk-dropdown-list > li:first-child {\r\n    background-color: #fff;\r\n    border: 1px solid #ccc;\r\n    border-bottom: none;\r\n    border-top: none;\r\n}\r\n/deep/ .bk-dropdown-menu .bk-dropdown-list > li:last-child {\r\n    background-color: #fff;\r\n    border-bottom: 1px solid #ccc;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/_babel-loader@7.1.5@babel-loader/lib/index.js!../../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/_babel-loader@7.1.5@babel-loader/lib/index.js!../../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"table—wrapper\"},[_c('div',{staticClass:\"header-table-operation\"},[_c('search-input',{attrs:{\"placeholder\":'请输入关键字搜索'},on:{\"search\":_vm.onSearch},model:{value:(_vm.searchValue),callback:function ($$v) {_vm.searchValue=$$v},expression:\"searchValue\"}}),_vm._v(\" \"),_c('advanced-search',{attrs:{\"form-widgets\":_vm.formWidgets},on:{\"submit\":_vm.handleAdvancedSearch}}),_vm._v(\" \"),_c('div',{staticClass:\"operation-container\"},[_c('div',[(_vm.copyData.length > 0)?_c('bk-button',{attrs:{\"title\":'导出'},on:{\"click\":_vm.toExport}},[_vm._v(\"\\n                    导出Excel\\n                \")]):_vm._e(),_vm._v(\" \"),_c('bk-dropdown-menu',{ref:\"dropdown\",attrs:{\"trigger\":\"click\"},on:{\"show\":_vm.dropdownShow,\"hide\":_vm.dropdownHide}},[_c('div',{staticClass:\"dropdown-trigger-btn\",staticStyle:{\"padding-left\":\"19px\"},attrs:{\"slot\":\"dropdown-trigger\"},slot:\"dropdown-trigger\"},[_c('span',[_vm._v(\"更多操作\")]),_vm._v(\" \"),_c('i',{class:['bk-icon icon-angle-down',{ 'icon-flip': _vm.isDropdownShow }]})]),_vm._v(\" \"),_c('ul',{staticClass:\"bk-dropdown-list\",attrs:{\"slot\":\"dropdown-content\"},slot:\"dropdown-content\"},[_c('li',[_c('a',{attrs:{\"href\":\"javascript:;\"},on:{\"click\":_vm.confirmNormal}},[_vm._v(\"确认异常\")])]),_vm._v(\" \"),_c('li',[_c('a',{attrs:{\"href\":\"javascript:;\"},on:{\"click\":_vm.confirmOffline}},[_vm._v(\"加入离线白名单\")])])])])],1)])],1),_vm._v(\" \"),_c('div',{directives:[{name:\"bkloading\",rawName:\"v-bkloading\",value:({ isLoading: _vm.loading, zIndex: 10 }),expression:\"{ isLoading: loading, zIndex: 10 }\"}]},[_c('common-table',{attrs:{\"data\":_vm.copyData,\"columns\":_vm.columns,\"select-column\":{ visible: true, fixed: true },\"order-column\":{ visible: false, fixed: false },\"settings-fields\":_vm.settingsFields,\"pagination\":_vm.pagination},on:{\"selection-change\":_vm.selectChange,\"handleSettingChange\":_vm.handleSettingChange,\"page-change\":_vm.handlePageChange,\"page-limit-change\":_vm.limitChange},scopedSlots:_vm._u([{key:\"status\",fn:function(record){return [_c('span',{staticClass:\"radius-tip\",style:({ background: _vm.statusColorObj[record.scope.allocate_status] })}),_vm._v(\"\\n                \"+_vm._s(_vm.statusObj[record.scope.allocate_status])+\"\\n            \")]}},{key:\"online_status\",fn:function(record){return [_c('span',{style:({ color: record.scope.online_status ? '#14A568' : '#FF5656' })},[_vm._v(\"\\n                    \"+_vm._s(record.scope.online_status ? '在线' : '离线')+\"\\n                \")])]}},{key:\"abnormal_code\",fn:function(record){return [_c('span',[_vm._v(\"\\n                    \"+_vm._s(_vm.abnormalObj[record.scope.abnormal_code])+\"\\n                \")])]}}])},[_vm._v(\" \"),_vm._v(\" \"),_vm._v(\" \"),_c('template',{slot:\"operation\"},[_c('bk-button',{staticClass:\"mr10\",attrs:{\"theme\":\"primary\",\"text\":\"\"}},[_vm._v(\"重置\")])],1)],2)],1),_vm._v(\" \"),_c('batch-recycle',{ref:\"batchRecycle\",attrs:{\"selected\":_vm.selectedRows}}),_vm._v(\" \"),_c('add-distribute',{ref:\"distributeDialog\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }"],"sourceRoot":""}