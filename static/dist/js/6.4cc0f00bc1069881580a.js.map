{"version":3,"sources":["webpack:///src/views/Ip/addressPool/index.vue","webpack:///./src/views/Ip/addressPool/index.vue?e655","webpack:///./src/views/Ip/addressPool/modify.vue","webpack:///./src/views/Ip/addressPool/modify.vue?0a25","webpack:///src/views/Ip/addressPool/modify.vue","webpack:///./src/views/Ip/addressPool/modify.vue?3ea1","webpack:///./src/views/Ip/addressPool/index.vue","webpack:///./src/views/Ip/addressPool/index.vue?ac61"],"names":["component","render","_vm","this","_h","$createElement","_c","_self","attrs","status","on","$event","onVisibleChange","slot","_v","_s","type","currentId","staticClass","toModify","_e","ref","formData","rules","isDisabled","model","value","callback","$$v","$set","expression","_l","attr","current","key","required","display_name","name","staticStyle","ip_net","length","item","index","delParams","getDisabled","IpNetLength","bk_cloud_id","gateway","dns","j","addParams","isConfirm","stopPropagation","preventDefault","submitData","apply","arguments","staticRenderFns","onSearch","searchValue","getFormWidget","handleAdvancedSearch","handleVisible","datas","toExport","directives","rawName","isLoading","loading","zIndex","columns","visible","fixed","pagination","settingsFields","handleSettingChange","handleSortChange","handlePageChange","limitChange","scopedSlots","_u","fn","record","toDetail","scope","usage_rate","toDelete","addressPoolType","currentItem","customAttr","segmentAttr","modifyPoolSuccess","modifyVisible","toClickEdit","detailVisible","fetchData"],"mappings":"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","file":"static/dist/js/6.4cc0f00bc1069881580a.js","sourcesContent":["<!--\nThis program is named IP Management Center and it is a tool to help network administrators manage enterprise IP resource pool reasonably and conveniently.\nCopyright (C) <2021>  <Guangzhou Canway Technology Co.,Ltd.>\nContact details: jackliu@canway.net or 11th Floor, Building A，Fengxing Plaza No. 67 Tianhe East Road Tianhe District, Guangzhou, China 510630. jackliu, 15927493530\nThis file is part of IP Management Center.\nIP Management Center is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\nIP Management Center is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\nYou should have received a copy of the GNU General Public License along with Canway software. If not, see <https://www.gnu.org/licenses/>.\n-->\n<template>\n    <div class=\"table—wrapper\">\n        <div class=\"header-table-operation\">\n            <search-input\n                v-model=\"searchValue\"\n                :placeholder=\"'请输入关键字搜索'\"\n                @search=\"onSearch\">\n            </search-input>\n            <!-- 更多查询 -->\n            <advanced-search :form-widgets=\"getFormWidget\" @submit=\"handleAdvancedSearch\"></advanced-search>\n            <div class=\"operation-container\">\n                <div>\n                    <bk-button @click=\"handleVisible()\">\n                        导入\n                    </bk-button>\n                    <bk-button :title=\"'新增地址池'\" @click=\"toModify()\">\n                        新增地址池\n                    </bk-button>\n                    <bk-button :title=\"'导出Excel'\" @click=\"toExport\" v-if=\"datas.length > 0\">\n                        导出Excel\n                    </bk-button>\n                </div>\n            </div>\n        </div>\n        <div v-bkloading=\"{ isLoading: loading, zIndex: 10 }\">\n            <common-table\n                :data=\"datas\"\n                :columns=\"columns\"\n                :select-column=\"{ visible: false, fixed: true }\"\n                :order-column=\"{ visible: false, fixed: false }\"\n                :pagination=\"pagination\"\n                :settings-fields=\"settingsFields\"\n                @handleSettingChange=\"handleSettingChange\"\n                @sort-change=\"handleSortChange\"\n                @page-change=\"handlePageChange\"\n                @page-limit-change=\"limitChange\"\n            >\n                <template slot=\"name\" slot-scope=\"record\">\n                    <span style=\"color: #3A84FF;cursor: pointer;\"\n                        @click=\"toDetail(record.scope)\">\n                        {{record.scope.name}}\n                    </span>\n                </template>\n                <template slot=\"ipTotal\" slot-scope=\"record\">\n                    <span v-if=\"record.scope.ip_net\">{{record.scope.ip_net.length}}</span>\n                </template>\n                <template slot=\"percent\" slot-scope=\"record\">\n                    {{record.scope.usage_rate || 0}}\n                </template>\n                <template slot=\"operation\" slot-scope=\"record\">\n                    <bk-button class=\"mr10\" theme=\"primary\" text @click=\"toModify(record.scope)\">修改</bk-button>\n                    <bk-popconfirm\n                        trigger=\"click\"\n                        title=\"确认删除该地址池吗？\"\n                        content=\"删除操作无法撤回，请谨慎操作！\"\n                        @confirm=\"toDelete(record.scope)\">\n                        <bk-button class=\"mr10\" theme=\"primary\" text>删除</bk-button>\n                    </bk-popconfirm>\n                </template>\n            </common-table>\n        </div>\n        <!--  编辑地址池  -->\n        <edit-address-pool v-model=\"modifyVisible\"\n            :type=\"addressPoolType\"\n            :current-item=\"currentItem\"\n            :custom-attr=\"customAttr\"\n            :segment-attr=\"segmentAttr\"\n            @ok=\"modifyPoolSuccess\">\n        </edit-address-pool>\n        <!-- 地址池详情 -->\n        <edit-address-pool v-model=\"detailVisible\"\n            :type=\"addressPoolType\"\n            :current-item=\"currentItem\"\n            :custom-attr=\"customAttr\"\n            :segment-attr=\"segmentAttr\"\n            @click-edit=\"toClickEdit\">\n        </edit-address-pool>\n        <!--  导入对话框   -->\n        <import-dialog ref=\"importDialog\"\n            @ok-confirm=\"fetchData\"></import-dialog>\n    </div>\n</template>\n\n<script>\n    import searchInput from '@/components/searchInput'\n    import commonTable from '@/components/table/comTable'\n    import advancedSearch from '@/components/popover/advancedSearch'\n    import editAddressPool from './modify'\n    import importDialog from '../components/import'\n\n    export default {\n        name: 'home',\n        components: {\n            commonTable,\n            searchInput,\n            advancedSearch,\n            editAddressPool,\n            importDialog\n        },\n        data() {\n            return {\n                addressPoolType: '',\n                searchValue: '',\n                modifyVisible: false,\n                datas: [],\n                loading: false,\n                importLoading: false,\n                columns: [{\n                    label: '操作',\n                    key: 'operation',\n                    width: '100px',\n                    scopedSlots: { customRender: 'operation' }\n                }],\n                pagination: {\n                    current: 1,\n                    count: 0,\n                    limit: 10\n                },\n                sort: {\n                    prop: 'create_at',\n                    order: 'descending'\n                },\n                // 高级搜索表单配置信息\n                formWidgets: [],\n                // 表格设置字段信息\n                settingsFields: [\n                    {\n                        disabled: true,\n                        label: '名称',\n                        key: 'name',\n                        align: 'left',\n                        sortable: true,\n                        attr: {\n                            minWidth: '100px'\n                        },\n                        scopedSlots: { customRender: 'name' },\n                        // conditionAttr: {} 跟表头相关的搜索配置属性信息\n                        conditionAttr: {\n                            widget: 'input',\n                            placeholder: '请输入名称',\n                            attr: {\n                                clearable: true\n                            }\n                        }\n                    },\n                    {\n                        label: '子网数量',\n                        key: 'ip_total',\n                        align: 'right',\n                        attr: {\n                            minWidth: '80px'\n                        },\n                        scopedSlots: { customRender: 'ipTotal' },\n                        conditionAttr: {\n                            widget: 'input',\n                            placeholder: '请输入子网数量',\n                            attr: {\n                                clearable: true,\n                                min: 0,\n                                type: 'number'\n                            }\n                        }\n                    },\n                    {\n                        label: 'IP数（可分配/有效数）',\n                        key: 'ip_count',\n                        attr: {\n                            minWidth: '130px'\n                        },\n                        align: 'left'\n                    },\n                    {\n                        label: '保留IP数',\n                        key: 'reserve_ip_count',\n                        align: 'right'\n                    },\n                    {\n                        label: '使用率',\n                        key: 'usage_rate',\n                        align: 'right',\n                        scopedSlots: { customRender: 'percent' }\n                    },\n                    {\n                        label: '添加者',\n                        key: 'create_by',\n                        align: 'left',\n                        attr: {\n                            minWidth: '100px'\n                        },\n                        conditionAttr: {\n                            widget: 'input',\n                            placeholder: '请输入添加者',\n                            attr: {\n                                clearable: true\n                            }\n                        }\n                    },\n                    {\n                        label: '添加时间',\n                        key: 'create_at',\n                        align: 'left',\n                        sortable: true,\n                        attr: {\n                            minWidth: '150px'\n                        },\n                        conditionAttr: {\n                            widget: 'date-picker',\n                            placeholder: '请选择...',\n                            attr: {\n                                style: { width: '100%' },\n                                transfer: true,\n                                clearable: true,\n                                type: 'daterange',\n                                shortcutClose: true,\n                                useShortcutText: false,\n                                shortcuts: [\n                                    {\n                                        text: '今天',\n                                        value() {\n                                            const end = new Date()\n                                            const start = new Date()\n                                            return [start, end]\n                                        }\n                                    },\n                                    {\n                                        text: '近7天',\n                                        value() {\n                                            const end = new Date()\n                                            const start = new Date()\n                                            start.setTime(start.getTime() - 3600 * 1000 * 24 * 7)\n                                            return [start, end]\n                                        }\n                                    },\n                                    {\n                                        text: '近15天',\n                                        value() {\n                                            const end = new Date()\n                                            const start = new Date()\n                                            start.setTime(start.getTime() - 3600 * 1000 * 24 * 15)\n                                            return [start, end]\n                                        }\n                                    },\n                                    {\n                                        text: '近30天',\n                                        value() {\n                                            const end = new Date()\n                                            const start = new Date()\n                                            start.setTime(start.getTime() - 3600 * 1000 * 24 * 30)\n                                            return [start, end]\n                                        }\n                                    }\n                                ]\n                            }\n                        }\n                    }\n                ],\n                currentItem: {},\n                detailVisible: false,\n                // 子网自定义属性\n                segmentAttr: [],\n                // 地址池自定义属性\n                customAttr: [],\n                searchParams: {},\n                customAttrNames: []\n            }\n        },\n        computed: {\n            getFormWidget() {\n                const newWidgets = this.formWidgets.concat()\n                // 处理新的数组变量\n                newWidgets.pop()\n                return newWidgets\n            }\n        },\n        watch: {\n            searchValue(newV) {\n                if (!newV) {\n                    this.onSearch()\n                }\n            }\n        },\n        created() {\n            const stateColumns = this.$store.state.product.tableColumns.ip_pool\n            // 判断缓存是否有已设置的表头数据信息\n            if (stateColumns.length > 0) {\n                this.columns = [...stateColumns]\n            } else {\n                this.columns = this.settingsFields.slice(0, 7).concat(this.columns)\n            }\n            // 获取对应的高级搜索框内的表单配置数据信息\n            const adnvancedWidget = this.columns.map(item => {\n                return {\n                    name: item.key,\n                    label: item.label,\n                    ...item.conditionAttr\n                }\n            })\n            const _arr = ['ip_total', 'ip_count', 'reserve_ip_count', 'usage_rate', ...this.customAttrNames]\n            this.formWidgets = adnvancedWidget.filter(data => !_arr.includes(data.name))\n        },\n        mounted() {\n            if (this.$route.query.name) {\n                this.searchValue = this.$route.query.name\n                this.searchParams = {search: this.searchValue}\n            }\n            this.fetchData()\n            // 子网和地址池对应的自定义属性获取\n            this.getCustomAttr({type: 'ip_pool'}, 'customAttr')\n            this.getCustomAttr({type: 'tetwork_segment'}, 'segmentAttr')\n        },\n        methods: {\n            async fetchData(params = {}) {\n                this.loading = true\n                // page:页数, page_size:每页数\n                try {\n                    let sort = this.sort.prop\n                    if (sort === null || sort === undefined) {\n                        sort = 'create_at'\n                    }\n                    const res = await this.$api.searchPool({\n                        ...this.searchParams,\n                        ...params,\n                        page: this.pagination.current,\n                        page_size: this.pagination.limit,\n                        sort: this.sort.order === 'ascending' ? sort : '-' + sort\n                    })\n                    if (res.result) {\n                        this.pagination.count = res.data.count\n                        res.data.results.forEach(item => {\n                            item.custom_attr.forEach(attr => {\n                                item[attr.name] = attr.value\n                            })\n                        })\n                        this.datas = res.data.results\n                    } else {\n                        this._errorMessage(res.message)\n                    }\n                } finally {\n                    this.loading = false\n                }\n            },\n            // 获取自定义属性\n            async getCustomAttr(params = {}, data) {\n                const res = await this.$api.searchCustom({\n                    ...params\n                })\n                if (res.result) {\n                    this[data] = res.data.results\n                    if (data === 'customAttr') {\n                        res.data.results.forEach(item => {\n                            this.settingsFields.push({\n                                label: item.display_name,\n                                key: item.name,\n                                align: 'left',\n                                attr: {\n                                    minWidth: '100px'\n                                },\n                                conditionAttr: {\n                                    widget: 'input',\n                                    placeholder: `请输入${item.display_name}`,\n                                    attr: {\n                                        clearable: true\n                                    }\n                                }\n                            })\n                            this.customAttrNames.push(item.name)\n                        })\n                    }\n                } else {\n                    this[data] = []\n                }\n            },\n            handlePageChange(page) {\n                this.pagination.current = page\n                this.fetchData()\n            },\n            limitChange(limit) {\n                this.pagination.current = 1\n                this.pagination.limit = limit\n                this.fetchData()\n            },\n            onSearch(value) {\n                this.searchParams = {search: value}\n                this.pagination.current = 1\n                this.fetchData({\n                    search: value\n                })\n            },\n            // 表格设置确定的回调方法\n            handleSettingChange(datas, columns) {\n                const _arr = ['ip_total', 'ip_count', 'reserve_ip_count', 'usage_rate', ...this.customAttrNames]\n                this.formWidgets = datas.filter(data => !_arr.includes(data.name))\n                // vuex缓存表格头设置的信息\n                this.$store.commit('setTableColumns', {column: columns, key: 'ip_pool'})\n            },\n            // 高级搜索提交的回调方法\n            handleAdvancedSearch(params) {\n                Object.keys(params).forEach(item => {\n                    if (item === 'create_at' || item === 'update_at') {\n                        if (params[item][0] && params[item][1]) {\n                            params[item + '__gte'] = this.$moment(params[item][0]).format('YYYY-MM-DD HH:mm:ss')\n                            params[item + '__lte'] = this.$moment(params[item][1]).format('YYYY-MM-DD HH:mm:ss')\n                            delete params[item]\n                        } else {\n                            delete params[item]\n                        }\n                    }\n                    if (!params[item]) {\n                        delete params[item]\n                    }\n                })\n                this.pagination.current = 1\n                this.searchParams = {...params}\n                this.fetchData({...params})\n            },\n            // 表头的排序触发事件\n            handleSortChange({ column, prop, order }) {\n                this.sort.prop = prop\n                this.sort.order = order\n                this.fetchData()\n            },\n            // 点击编辑地址池触发事件\n            toModify(record) {\n                this.addressPoolType = 'modify'\n                this.modifyVisible = true\n                if (record) {\n                    this.currentItem = {...record}\n                } else {\n                    this.currentItem = {\n                        name: '',\n                        ip_net: [{\n                            ip_net: '',\n                            bk_cloud_id: '0',\n                            gateway: '',\n                            dns: '',\n                            vlan_id: ''\n                        }]\n                    }\n                }\n            },\n            // 编辑和新增成功后的回调方法，成功后再次刷新表格数据\n            modifyPoolSuccess(type) {\n                if (type === 'add') {\n                    this.pagination.current = 1\n                }\n                this.addressPoolType = ''\n                this.modifyVisible = false\n                this.fetchData()\n            },\n            toClickEdit() {\n                this.addressPoolType = 'modify'\n            },\n            // 点击删除地址池触发事件\n            async toDelete(record) {\n                const res = await this.$api.delete_ip_pool({id: record.id})\n                if (res.result) {\n                    this._successMessage(res.message)\n                    this.fetchData()\n                } else {\n                    this._errorMessage(res.message)\n                }\n            },\n            // 查看详情\n            toDetail(record) {\n                this.addressPoolType = 'detail'\n                this.detailVisible = true\n                this.currentItem = {...record}\n            },\n            handleVisible() {\n                this.$refs.importDialog.showDialog()\n            },\n            // 导出excel\n            toExport() {\n                let _params = ''\n                Object.keys(this.searchParams).forEach(item => {\n                    _params = _params + `&${item}=${this.searchParams[item]}`\n                })\n                const url = window.siteUrl + 'ip_pool/export_excel/?page=1&page_size=-1' + _params\n                window.open(url)\n            }\n        }\n    }\n</script>\n\n<style scoped lang=\"scss\">\n.file-upload-wrapper {\n    width: 68px;\n    height: 32px;\n    position: relative;\n    display: inline-block;\n    >input {\n        opacity: 0;\n        position: absolute;\n        top: 0;\n        left: 0;\n    }\n}\n</style>\n","import mod from \"-!../../../../node_modules/_babel-loader@7.1.5@babel-loader/lib/index.js!../../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/_babel-loader@7.1.5@babel-loader/lib/index.js!../../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./modify.vue?vue&type=template&id=68a0ca99&scoped=true&\"\nimport script from \"./modify.vue?vue&type=script&lang=js&\"\nexport * from \"./modify.vue?vue&type=script&lang=js&\"\nimport style0 from \"./modify.vue?vue&type=style&index=0&id=68a0ca99&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"68a0ca99\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/_babel-loader@7.1.5@babel-loader/lib/index.js!../../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./modify.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/_babel-loader@7.1.5@babel-loader/lib/index.js!../../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./modify.vue?vue&type=script&lang=js&\"","<!--\r\nThis program is named IP Management Center and it is a tool to help network administrators manage enterprise IP resource pool reasonably and conveniently.\r\nCopyright (C) <2021>  <Guangzhou Canway Technology Co.,Ltd.>\r\nContact details: jackliu@canway.net or 11th Floor, Building A，Fengxing Plaza No. 67 Tianhe East Road Tianhe District, Guangzhou, China 510630. jackliu, 15927493530\r\nThis file is part of IP Management Center.\r\nIP Management Center is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\r\nIP Management Center is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\r\nYou should have received a copy of the GNU General Public License along with Canway software. If not, see <https://www.gnu.org/licenses/>.\r\n-->\r\n<template>\r\n    <bk-sideslider\r\n        :is-show.sync=\"status\"\r\n        :width=\"540\"\r\n        @shown=\"onVisibleChange\"\r\n        @hidden=\"onVisibleChange\"\r\n        :quick-close=\"false\">\r\n        <div slot=\"header\">\r\n            {{ type === 'detail' ? '地址池信息' : currentId ? '编辑地址池' : '新增地址池' }}\r\n            <span class=\"icon iconfont icon-changyongtubiao-bianji edit-icon\" @click=\"toModify\"\r\n                v-if=\"type === 'detail'\"></span>\r\n        </div>\r\n        <div\r\n            slot=\"content\"\r\n            class=\"slider-content-wrapper\">\r\n            <bk-form\r\n                :label-width=\"170\"\r\n                :model=\"formData\"\r\n                :rules=\"rules\"\r\n                ref=\"validateForm\">\r\n                <p class=\"title\">\r\n                    <span>地址池信息</span>\r\n                </p>\r\n                <bk-form-item\r\n                    label=\"名称\"\r\n                    :icon-offset=\"30\"\r\n                    :required=\"true\"\r\n                    :property=\"'name'\"\r\n                    :rules=\"rules['name']\">\r\n                    <bk-input\r\n                        :disabled=\"isDisabled\"\r\n                        v-model=\"formData.name\"\r\n                        placeholder=\"请输入地址池名称\">\r\n                    </bk-input>\r\n                </bk-form-item>\r\n                <template v-for=\"(attr, current) in customAttr\">\r\n                    <bk-form-item\r\n                        :key=\"current\"\r\n                        :icon-offset=\"30\"\r\n                        :required=\"attr.required\"\r\n                        :label=\"attr.display_name\"\r\n                        :rules=\"rules[attr.name]\"\r\n                        :property=\"formData[attr.name + '']\">\r\n                        <bk-input\r\n                            :disabled=\"isDisabled\"\r\n                            v-model=\"formData[attr.name]\"\r\n                            :placeholder=\"'请输入' + attr.display_name\">\r\n                        </bk-input>\r\n                    </bk-form-item>\r\n                </template>\r\n                <bk-divider style=\"width:calc(100% - 50px);left:25px !important;margin:2em 0\"></bk-divider>\r\n                <p class=\"title\">\r\n                    <span>子网信息</span>\r\n                </p>\r\n                <div v-if=\"formData.ip_net && formData.ip_net.length > 0\">\r\n                    <div\r\n                        :key=\"index\"\r\n                        v-for=\"(item, index) in formData.ip_net\"\r\n                        style=\"margin-bottom: 20px\">\r\n                        <div class=\"close-icon\">\r\n                            <bk-icon type=\"close\" @click=\"delParams(index)\" />\r\n                        </div>\r\n                        <bk-form-item\r\n                            :required=\"true\"\r\n                            :icon-offset=\"30\"\r\n                            :label=\"'网段' + (index + 1)\"\r\n                            :property=\"'ip_net.' + index + '.ip_net'\"\r\n                            :rules=\"rules.ip_net\">\r\n                            <bk-input\r\n                                v-model=\"item.ip_net\"\r\n                                :disabled=\"getDisabled && (IpNetLength > index) && item.ip_net !== '' || isDisabled\"\r\n                                placeholder=\"如:192.168.1.0/24\">\r\n                            </bk-input>\r\n                        </bk-form-item>\r\n                        <bk-form-item\r\n                            label=\"云区域\"\r\n                            :icon-offset=\"50\"\r\n                            :required=\"true\"\r\n                            :property=\"'ip_net.' + index + '.bk_cloud_id'\"\r\n                            :rules=\"rules.bk_cloud_id\">\r\n                            <bk-input\r\n                                :disabled=\"isDisabled\"\r\n                                v-model=\"item.bk_cloud_id\"\r\n                                type=\"number\"\r\n                                :min=\"0\"\r\n                                placeholder=\"默认为0\">\r\n                            </bk-input>\r\n                        </bk-form-item>\r\n                        <bk-form-item\r\n                            label=\"网关\"\r\n                            :icon-offset=\"30\"\r\n                            :required=\"true\"\r\n                            :property=\"'ip_net.' + index + '.gateway'\"\r\n                            :rules=\"rules.gateway\">\r\n                            <bk-input\r\n                                :disabled=\"isDisabled\"\r\n                                v-model=\"item.gateway\"\r\n                                placeholder=\"请输入网关\">\r\n                            </bk-input>\r\n                        </bk-form-item>\r\n                        <bk-form-item\r\n                            label=\"DNS服务器\"\r\n                            :required=\"true\"\r\n                            :icon-offset=\"30\"\r\n                            :property=\"'ip_net.' + index + '.dns'\"\r\n                            :rules=\"rules.dns\">\r\n                            <bk-input\r\n                                :disabled=\"isDisabled\"\r\n                                v-model=\"item.dns\"\r\n                                placeholder=\"请输入DNS服务器\">\r\n                            </bk-input>\r\n                        </bk-form-item>\r\n                        <bk-form-item\r\n                            label=\"VLAN ID\"\r\n                            :icon-offset=\"30\"\r\n                            :property=\"'ip_net.' + index + '.vlan_id'\">\r\n                            <bk-input :disabled=\"isDisabled\"\r\n                                type=\"number\"\r\n                                :min=\"0\"\r\n                                v-model=\"item.vlan_id\"></bk-input>\r\n                        </bk-form-item>\r\n                        <template v-for=\"(attr, j) in segmentAttr\">\r\n                            <bk-form-item\r\n                                :icon-offset=\"30\"\r\n                                :key=\"j\"\r\n                                :required=\"attr.required\"\r\n                                :label=\"attr.display_name\"\r\n                                :rules=\"rules[attr.name]\"\r\n                                :property=\"'ip_net.' + index + '.' + attr.name\">\r\n                                <bk-input\r\n                                    :disabled=\"isDisabled\"\r\n                                    v-model=\"item[attr.name]\"\r\n                                    :placeholder=\"'请输入' + attr.display_name\">\r\n                                </bk-input>\r\n                            </bk-form-item>\r\n                        </template>\r\n                    </div>\r\n                </div>\r\n                <div class=\"add-container\" @click=\"addParams\" v-if=\"!isDisabled\">\r\n                    <bk-icon type=\"plus-circle\" />\r\n                    <span>添加子网</span>\r\n                </div>\r\n            </bk-form>\r\n        </div>\r\n        <div slot=\"footer\" v-if=\"!isDisabled\">\r\n            <bk-button\r\n                ext-cls=\"mr5\"\r\n                theme=\"primary\"\r\n                title=\"保存\"\r\n                :loading=\"isConfirm\"\r\n                @click.stop.prevent=\"submitData\"\r\n                style=\"margin-left: 24px\">\r\n                保存\r\n            </bk-button>\r\n            <bk-button\r\n                ext-cls=\"mr5\"\r\n                theme=\"default\"\r\n                title=\"取消\"\r\n                @click=\"status = false\">\r\n                取消\r\n            </bk-button>\r\n        </div>\r\n    </bk-sideslider>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        name: 'address-pool-side-slider',\r\n        model: {\r\n            props: 'value',\r\n            event: 'change'\r\n        },\r\n        props: {\r\n            type: {\r\n                type: String,\r\n                default: ''\r\n            },\r\n            value: {\r\n                type: Boolean,\r\n                default: false\r\n            },\r\n            currentItem: {\r\n                type: Object,\r\n                default: () => {}\r\n            },\r\n            // 地址池自定义属性\r\n            customAttr: {\r\n                type: Array,\r\n                default: () => []\r\n            },\r\n            // 子网自定义属性\r\n            segmentAttr: {\r\n                type: Array,\r\n                default: () => []\r\n            }\r\n        },\r\n        data() {\r\n            return {\r\n                currentId: '',\r\n                IpNetLength: 0,\r\n                formData: {\r\n                    name: '',\r\n                    ip_net: [{\r\n                        ip_net: '',\r\n                        bk_cloud_id: '0',\r\n                        gateway: '',\r\n                        dns: '',\r\n                        vlan_id: ''\r\n                    }]\r\n                },\r\n                rules: {\r\n                    name: [\r\n                        {\r\n                            required: true,\r\n                            message: '必填项',\r\n                            trigger: 'change'\r\n                        }\r\n                    ],\r\n                    ip_net: [\r\n                        {\r\n                            required: true,\r\n                            message: '必填项',\r\n                            trigger: 'change'\r\n                        },\r\n                        {\r\n                            regex: /^(\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])\\/([1-9]|[1-2][0-9]|3[0-2])$/,\r\n                            message: '请输入正确网段',\r\n                            trigger: 'change'\r\n                        }\r\n                    ],\r\n                    bk_cloud_id: [\r\n                        {\r\n                            required: true,\r\n                            message: '必填项',\r\n                            trigger: 'change'\r\n                        }\r\n                    ],\r\n                    gateway: [\r\n                        {\r\n                            required: true,\r\n                            message: '必填项',\r\n                            trigger: 'change'\r\n                        },\r\n                        {\r\n                            min: 3,\r\n                            message: function(val) {\r\n                                return `${val}不能小于3个字符`\r\n                            },\r\n                            trigger: 'change'\r\n                        },\r\n                        {\r\n                            regex: /^(\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])$/,\r\n                            message: '请输入正确的网关',\r\n                            trigger: 'change'\r\n                        }\r\n                    ],\r\n                    dns: [\r\n                        {\r\n                            required: true,\r\n                            message: '必填项',\r\n                            trigger: 'change'\r\n                        },\r\n                        {\r\n                            regex: /^(\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])$/,\r\n                            message: '请输入正确的dns服务器',\r\n                            trigger: 'change'\r\n                        }\r\n                    ]\r\n                },\r\n                status: false,\r\n                isConfirm: false,\r\n                // 子网自定属性map集合\r\n                segementAttrObj: {}\r\n            }\r\n        },\r\n        computed: {\r\n            getDisabled() {\r\n                let flag = false\r\n                if (this.currentId) {\r\n                    flag = true\r\n                }\r\n                return flag\r\n            },\r\n            isDisabled() {\r\n                return this.type === 'detail'\r\n            }\r\n        },\r\n        watch: {\r\n            value: {\r\n                handler(newVal) {\r\n                    this.status = newVal\r\n                    if (!this.status) return false\r\n                    this.currentId = this.currentItem['id'] || ''\r\n                    // 编辑数据\r\n                    this.currentId ? this.getData() : this.formData = JSON.stringify(this.currentItem) && JSON.parse(JSON.stringify(this.currentItem))\r\n                    this.$nextTick(() => {\r\n                        this.settingPosition()\r\n                        if (!this.currentId) {\r\n                            this.getCustomAttr()\r\n                        }\r\n                    })\r\n                }\r\n            }\r\n        },\r\n        methods: {\r\n            onVisibleChange() {\r\n                this.$emit('change', this.status)\r\n            },\r\n            /*\r\n                获取地址池和子网的自定义属性\r\n                type:(\"ip_pool\", \"IP地址池自定义属性\"), (\"tetwork_segment\", \"子网自定义属性\"), (\"ips\", \"ip自定义属性\")\r\n            */\r\n            getCustomAttr() {\r\n                if (this.customAttr.length === 0) return false\r\n                this.customAttrRule(this.customAttr)\r\n                this.customAttr.forEach(item => {\r\n                    this.formData[item.name] = ''\r\n                })\r\n                if (this.segmentAttr.length === 0) return false\r\n                this.customAttrRule(this.segmentAttr)\r\n                this.segementAttrObj = {}\r\n                this.segmentAttr.forEach(item => {\r\n                    this.segementAttrObj[item.name] = ''\r\n                })\r\n                const IpNet = JSON.parse(JSON.stringify(this.formData.ip_net))\r\n                this.formData.ip_net = IpNet.map(item => {\r\n                    return {...item, ...this.segementAttrObj}\r\n                })\r\n            },\r\n            // 根据自定义属性添加表单的校验信息\r\n            customAttrRule(data) {\r\n                // 加校验项\r\n                data.forEach(ele => {\r\n                    if (ele.required) {\r\n                        this.rules[ele.name] = [{\r\n                            required: true,\r\n                            message: '必填项',\r\n                            trigger: 'change'\r\n                        }]\r\n                    }\r\n                })\r\n                this.rules = {...this.rules}\r\n            },\r\n            getData() {\r\n                this.getCustomAttr()\r\n                this.formData = {\r\n                    ...this.currentItem\r\n                }\r\n                console.log(this.formData)\r\n                if (this.currentItem.custom_attr && Array.isArray(this.currentItem.custom_attr)) {\r\n                    this.currentItem.custom_attr.forEach(item => {\r\n                        this.formData[item.name] = item.value\r\n                    })\r\n                }\r\n                const IpNet = JSON.stringify(this.formData.ip_net) && JSON.parse(JSON.stringify(this.formData.ip_net))\r\n                if (IpNet) {\r\n                    this.IpNetLength = IpNet.length\r\n                    this.formData.ip_net = IpNet.map(item => {\r\n                        const attrObj = {}\r\n                        if (item.custom_attr && Array.isArray(item.custom_attr)) {\r\n                            item.custom_attr.forEach(attrItem => {\r\n                                attrObj[attrItem.name] = attrItem.value\r\n                            })\r\n                        }\r\n                        return {...item, ...attrObj}\r\n                    })\r\n                }\r\n            },\r\n            addParams() {\r\n                this.formData.ip_net.push({\r\n                    ip_net: '',\r\n                    bk_cloud_id: '0',\r\n                    gateway: '',\r\n                    dns: '',\r\n                    vlan_id: '',\r\n                    ...this.segementAttrObj\r\n                })\r\n                this.$nextTick(() => {\r\n                    this.settingPosition()\r\n                })\r\n            },\r\n            delParams(index) {\r\n                if (this.formData.ip_net.length <= 1) {\r\n                    this._errorMessage('地址池至少需要一个子网！')\r\n                    return\r\n                }\r\n                this.formData.ip_net.splice(index, 1)\r\n                this.$nextTick(() => {\r\n                    this.settingPosition()\r\n                })\r\n            },\r\n            submitData() {\r\n                this.isConfirm = true\r\n                const _this = this\r\n                if (_this.formData.ip_net.length === 0) {\r\n                    this._errorMessage('地址池至少需要一个子网！')\r\n                    return\r\n                }\r\n                this.$nextTick(() => {\r\n                    this.$refs.validateForm.validate().then(validator => {\r\n                        if (this.currentId) {\r\n                            this.commonFetch('modify_ip_pool')\r\n                        } else {\r\n                            this.commonFetch('create_ip_pool')\r\n                        }\r\n                    }, validator => {\r\n                        this.isConfirm = false\r\n                    })\r\n                })\r\n            },\r\n            commonFetch(url) {\r\n                // 自定义属性结构 customAttr: [{name: '', value: ''}]\r\n                const _formData = JSON.parse(JSON.stringify(this.formData))\r\n                const customAttr = []\r\n                this.customAttr.forEach(item => {\r\n                    customAttr.push({\r\n                        name: item.name,\r\n                        value: _formData[item.name]\r\n                    })\r\n                    delete _formData[item.name]\r\n                })\r\n                _formData['customAttr'] = customAttr\r\n                // 子网自定义属性结构 custom_attr: [{name: '', value: ''}]\r\n                const IpNet = JSON.parse(JSON.stringify(_formData.ip_net))\r\n                IpNet.forEach(ipItem => {\r\n                    const netCustomAttr = []\r\n                    this.segmentAttr.forEach(attr => {\r\n                        netCustomAttr.push({\r\n                            name: attr.name,\r\n                            value: ipItem[attr.name]\r\n                        })\r\n                    })\r\n                    ipItem['custom_attr'] = netCustomAttr\r\n                })\r\n                _formData.ip_net = [...IpNet]\r\n                this.$api[url]({\r\n                    ..._formData\r\n                }).then(res => {\r\n                    if (res.result) {\r\n                        if (res.message !== '') {\r\n                            this._errorMessage(res.message)\r\n                            if (!this.currentId) {\r\n                                this.$emit('ok', 'add')\r\n                            }\r\n                        } else {\r\n                            this._successMessage(this.currentId ? '修改成功' : '新增成功')\r\n                            this.$emit('ok', this.currentId ? 'edit' : 'add')\r\n                        }\r\n                    } else {\r\n                        this._errorMessage(res.message)\r\n                    }\r\n                }).finally(() => {\r\n                    this.isConfirm = false\r\n                })\r\n            },\r\n            toModify() {\r\n                this.$emit('click-edit', true)\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n/deep/ .bk-label {\r\n    width: 145px !important;\r\n}\r\n\r\n.bk-form-content {\r\n    margin-left: 145px !important;\r\n}\r\n\r\n.bk-form-control {\r\n    transform: translateX(-25px);\r\n}\r\n\r\n/deep/ .select_wrapper {\r\n    transform: translateX(-25px);\r\n}\r\n\r\n.slider-content-wrapper {\r\n    width: 100%;\r\n    box-sizing: border-box;\r\n\r\n    .title {\r\n        text-align: left;\r\n        margin-left: 24px;\r\n\r\n        span {\r\n            display: inline-block;\r\n            font-weight: 600;\r\n            color: #63656E;\r\n        }\r\n    }\r\n\r\n    .close-icon {\r\n        text-align: left;\r\n        margin-left: 24px;\r\n        color: #979BA5;\r\n\r\n        i {\r\n            cursor: pointer;\r\n        }\r\n\r\n        &:hover {\r\n            color: #3A84FF;\r\n        }\r\n    }\r\n\r\n    .add-container {\r\n        text-align: left;\r\n        margin: 0 0 20px 145px;\r\n        color: #3A84FF;\r\n        font-size: 14px;\r\n        cursor: pointer;\r\n\r\n        i {\r\n            color: #3A84FF;\r\n            font-size: 18px !important;\r\n        }\r\n\r\n        span {\r\n            font-size: 14px;\r\n        }\r\n    }\r\n}\r\n\r\n.edit-icon {\r\n    display: inline-block;\r\n    font-size: 28px;\r\n    vertical-align: middle;\r\n    cursor: pointer\r\n}\r\n</style>\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('bk-sideslider',{attrs:{\"is-show\":_vm.status,\"width\":540,\"quick-close\":false},on:{\"update:isShow\":function($event){_vm.status=$event},\"update:is-show\":function($event){_vm.status=$event},\"shown\":_vm.onVisibleChange,\"hidden\":_vm.onVisibleChange}},[_c('div',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_vm._v(\"\\n        \"+_vm._s(_vm.type === 'detail' ? '地址池信息' : _vm.currentId ? '编辑地址池' : '新增地址池')+\"\\n        \"),(_vm.type === 'detail')?_c('span',{staticClass:\"icon iconfont icon-changyongtubiao-bianji edit-icon\",on:{\"click\":_vm.toModify}}):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"slider-content-wrapper\",attrs:{\"slot\":\"content\"},slot:\"content\"},[_c('bk-form',{ref:\"validateForm\",attrs:{\"label-width\":170,\"model\":_vm.formData,\"rules\":_vm.rules}},[_c('p',{staticClass:\"title\"},[_c('span',[_vm._v(\"地址池信息\")])]),_vm._v(\" \"),_c('bk-form-item',{attrs:{\"label\":\"名称\",\"icon-offset\":30,\"required\":true,\"property\":'name',\"rules\":_vm.rules['name']}},[_c('bk-input',{attrs:{\"disabled\":_vm.isDisabled,\"placeholder\":\"请输入地址池名称\"},model:{value:(_vm.formData.name),callback:function ($$v) {_vm.$set(_vm.formData, \"name\", $$v)},expression:\"formData.name\"}})],1),_vm._v(\" \"),_vm._l((_vm.customAttr),function(attr,current){return [_c('bk-form-item',{key:current,attrs:{\"icon-offset\":30,\"required\":attr.required,\"label\":attr.display_name,\"rules\":_vm.rules[attr.name],\"property\":_vm.formData[attr.name + '']}},[_c('bk-input',{attrs:{\"disabled\":_vm.isDisabled,\"placeholder\":'请输入' + attr.display_name},model:{value:(_vm.formData[attr.name]),callback:function ($$v) {_vm.$set(_vm.formData, attr.name, $$v)},expression:\"formData[attr.name]\"}})],1)]}),_vm._v(\" \"),_c('bk-divider',{staticStyle:{\"width\":\"calc(100% - 50px)\",\"left\":\"25px !important\",\"margin\":\"2em 0\"}}),_vm._v(\" \"),_c('p',{staticClass:\"title\"},[_c('span',[_vm._v(\"子网信息\")])]),_vm._v(\" \"),(_vm.formData.ip_net && _vm.formData.ip_net.length > 0)?_c('div',_vm._l((_vm.formData.ip_net),function(item,index){return _c('div',{key:index,staticStyle:{\"margin-bottom\":\"20px\"}},[_c('div',{staticClass:\"close-icon\"},[_c('bk-icon',{attrs:{\"type\":\"close\"},on:{\"click\":function($event){return _vm.delParams(index)}}})],1),_vm._v(\" \"),_c('bk-form-item',{attrs:{\"required\":true,\"icon-offset\":30,\"label\":'网段' + (index + 1),\"property\":'ip_net.' + index + '.ip_net',\"rules\":_vm.rules.ip_net}},[_c('bk-input',{attrs:{\"disabled\":_vm.getDisabled && (_vm.IpNetLength > index) && item.ip_net !== '' || _vm.isDisabled,\"placeholder\":\"如:192.168.1.0/24\"},model:{value:(item.ip_net),callback:function ($$v) {_vm.$set(item, \"ip_net\", $$v)},expression:\"item.ip_net\"}})],1),_vm._v(\" \"),_c('bk-form-item',{attrs:{\"label\":\"云区域\",\"icon-offset\":50,\"required\":true,\"property\":'ip_net.' + index + '.bk_cloud_id',\"rules\":_vm.rules.bk_cloud_id}},[_c('bk-input',{attrs:{\"disabled\":_vm.isDisabled,\"type\":\"number\",\"min\":0,\"placeholder\":\"默认为0\"},model:{value:(item.bk_cloud_id),callback:function ($$v) {_vm.$set(item, \"bk_cloud_id\", $$v)},expression:\"item.bk_cloud_id\"}})],1),_vm._v(\" \"),_c('bk-form-item',{attrs:{\"label\":\"网关\",\"icon-offset\":30,\"required\":true,\"property\":'ip_net.' + index + '.gateway',\"rules\":_vm.rules.gateway}},[_c('bk-input',{attrs:{\"disabled\":_vm.isDisabled,\"placeholder\":\"请输入网关\"},model:{value:(item.gateway),callback:function ($$v) {_vm.$set(item, \"gateway\", $$v)},expression:\"item.gateway\"}})],1),_vm._v(\" \"),_c('bk-form-item',{attrs:{\"label\":\"DNS服务器\",\"required\":true,\"icon-offset\":30,\"property\":'ip_net.' + index + '.dns',\"rules\":_vm.rules.dns}},[_c('bk-input',{attrs:{\"disabled\":_vm.isDisabled,\"placeholder\":\"请输入DNS服务器\"},model:{value:(item.dns),callback:function ($$v) {_vm.$set(item, \"dns\", $$v)},expression:\"item.dns\"}})],1),_vm._v(\" \"),_c('bk-form-item',{attrs:{\"label\":\"VLAN ID\",\"icon-offset\":30,\"property\":'ip_net.' + index + '.vlan_id'}},[_c('bk-input',{attrs:{\"disabled\":_vm.isDisabled,\"type\":\"number\",\"min\":0},model:{value:(item.vlan_id),callback:function ($$v) {_vm.$set(item, \"vlan_id\", $$v)},expression:\"item.vlan_id\"}})],1),_vm._v(\" \"),_vm._l((_vm.segmentAttr),function(attr,j){return [_c('bk-form-item',{key:j,attrs:{\"icon-offset\":30,\"required\":attr.required,\"label\":attr.display_name,\"rules\":_vm.rules[attr.name],\"property\":'ip_net.' + index + '.' + attr.name}},[_c('bk-input',{attrs:{\"disabled\":_vm.isDisabled,\"placeholder\":'请输入' + attr.display_name},model:{value:(item[attr.name]),callback:function ($$v) {_vm.$set(item, attr.name, $$v)},expression:\"item[attr.name]\"}})],1)]})],2)}),0):_vm._e(),_vm._v(\" \"),(!_vm.isDisabled)?_c('div',{staticClass:\"add-container\",on:{\"click\":_vm.addParams}},[_c('bk-icon',{attrs:{\"type\":\"plus-circle\"}}),_vm._v(\" \"),_c('span',[_vm._v(\"添加子网\")])],1):_vm._e()],2)],1),_vm._v(\" \"),(!_vm.isDisabled)?_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('bk-button',{staticStyle:{\"margin-left\":\"24px\"},attrs:{\"ext-cls\":\"mr5\",\"theme\":\"primary\",\"title\":\"保存\",\"loading\":_vm.isConfirm},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.submitData.apply(null, arguments)}}},[_vm._v(\"\\n            保存\\n        \")]),_vm._v(\" \"),_c('bk-button',{attrs:{\"ext-cls\":\"mr5\",\"theme\":\"default\",\"title\":\"取消\"},on:{\"click\":function($event){_vm.status = false}}},[_vm._v(\"\\n            取消\\n        \")])],1):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=1860be97&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=1860be97&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1860be97\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"table—wrapper\"},[_c('div',{staticClass:\"header-table-operation\"},[_c('search-input',{attrs:{\"placeholder\":'请输入关键字搜索'},on:{\"search\":_vm.onSearch},model:{value:(_vm.searchValue),callback:function ($$v) {_vm.searchValue=$$v},expression:\"searchValue\"}}),_vm._v(\" \"),_c('advanced-search',{attrs:{\"form-widgets\":_vm.getFormWidget},on:{\"submit\":_vm.handleAdvancedSearch}}),_vm._v(\" \"),_c('div',{staticClass:\"operation-container\"},[_c('div',[_c('bk-button',{on:{\"click\":function($event){return _vm.handleVisible()}}},[_vm._v(\"\\n                    导入\\n                \")]),_vm._v(\" \"),_c('bk-button',{attrs:{\"title\":'新增地址池'},on:{\"click\":function($event){return _vm.toModify()}}},[_vm._v(\"\\n                    新增地址池\\n                \")]),_vm._v(\" \"),(_vm.datas.length > 0)?_c('bk-button',{attrs:{\"title\":'导出Excel'},on:{\"click\":_vm.toExport}},[_vm._v(\"\\n                    导出Excel\\n                \")]):_vm._e()],1)])],1),_vm._v(\" \"),_c('div',{directives:[{name:\"bkloading\",rawName:\"v-bkloading\",value:({ isLoading: _vm.loading, zIndex: 10 }),expression:\"{ isLoading: loading, zIndex: 10 }\"}]},[_c('common-table',{attrs:{\"data\":_vm.datas,\"columns\":_vm.columns,\"select-column\":{ visible: false, fixed: true },\"order-column\":{ visible: false, fixed: false },\"pagination\":_vm.pagination,\"settings-fields\":_vm.settingsFields},on:{\"handleSettingChange\":_vm.handleSettingChange,\"sort-change\":_vm.handleSortChange,\"page-change\":_vm.handlePageChange,\"page-limit-change\":_vm.limitChange},scopedSlots:_vm._u([{key:\"name\",fn:function(record){return [_c('span',{staticStyle:{\"color\":\"#3A84FF\",\"cursor\":\"pointer\"},on:{\"click\":function($event){return _vm.toDetail(record.scope)}}},[_vm._v(\"\\n                    \"+_vm._s(record.scope.name)+\"\\n                \")])]}},{key:\"ipTotal\",fn:function(record){return [(record.scope.ip_net)?_c('span',[_vm._v(_vm._s(record.scope.ip_net.length))]):_vm._e()]}},{key:\"percent\",fn:function(record){return [_vm._v(\"\\n                \"+_vm._s(record.scope.usage_rate || 0)+\"\\n            \")]}},{key:\"operation\",fn:function(record){return [_c('bk-button',{staticClass:\"mr10\",attrs:{\"theme\":\"primary\",\"text\":\"\"},on:{\"click\":function($event){return _vm.toModify(record.scope)}}},[_vm._v(\"修改\")]),_vm._v(\" \"),_c('bk-popconfirm',{attrs:{\"trigger\":\"click\",\"title\":\"确认删除该地址池吗？\",\"content\":\"删除操作无法撤回，请谨慎操作！\"},on:{\"confirm\":function($event){return _vm.toDelete(record.scope)}}},[_c('bk-button',{staticClass:\"mr10\",attrs:{\"theme\":\"primary\",\"text\":\"\"}},[_vm._v(\"删除\")])],1)]}}])})],1),_vm._v(\" \"),_c('edit-address-pool',{attrs:{\"type\":_vm.addressPoolType,\"current-item\":_vm.currentItem,\"custom-attr\":_vm.customAttr,\"segment-attr\":_vm.segmentAttr},on:{\"ok\":_vm.modifyPoolSuccess},model:{value:(_vm.modifyVisible),callback:function ($$v) {_vm.modifyVisible=$$v},expression:\"modifyVisible\"}}),_vm._v(\" \"),_c('edit-address-pool',{attrs:{\"type\":_vm.addressPoolType,\"current-item\":_vm.currentItem,\"custom-attr\":_vm.customAttr,\"segment-attr\":_vm.segmentAttr},on:{\"click-edit\":_vm.toClickEdit},model:{value:(_vm.detailVisible),callback:function ($$v) {_vm.detailVisible=$$v},expression:\"detailVisible\"}}),_vm._v(\" \"),_c('import-dialog',{ref:\"importDialog\",on:{\"ok-confirm\":_vm.fetchData}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }"],"sourceRoot":""}